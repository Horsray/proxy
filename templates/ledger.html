{% extends 'layout.html' %}
{% block title %}台账管理{% endblock %}
{% block content %}
<h4>台账统计</h4>
<form class="row row-cols-lg-auto g-2 align-items-center mb-3" method="get">
  <div class="col-auto">
    <select name="product" class="form-select form-select-sm">
      <option value="">产品</option>
      {% for p in products.values() %}
      <option value="{{ p.name }}" {% if product_filter==p.name %}selected{% endif %}>{{ p.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto"><input type="date" name="start" class="form-control form-control-sm" value="{{ start }}"></div>
  <div class="col-auto"><input type="date" name="end" class="form-control form-control-sm" value="{{ end }}"></div>
  <div class="col-auto"><input name="admin" class="form-control form-control-sm" placeholder="管理员" value="{{ admin_filter }}"></div>
  <div class="col-auto"><button class="btn btn-outline-primary btn-sm" type="submit">筛选</button></div>
</form>
<table class="table table-striped table-sm">
  <thead><tr><th>时间</th><th>管理员</th><th>产品</th><th>单价</th><th>数量</th><th>销售额</th></tr></thead>
  <tbody>
  {% for r in records %}
  <tr>
    <td>{{ r.time }}</td>
    <td>{{ r.admin }}</td>
    <td>{{ r.product }}</td>
    <td>{{ r.price }}</td>
    <td>{{ r.count }}</td>
    <td>{{ r.revenue }}</td>
  </tr>
  {% endfor %}
  </tbody>
</table>
<div class="mt-3">
  本日收入{{ daily }}元，本月收入{{ monthly }}元，本年度收入{{ yearly }}元，累计收入{{ total }}元
</div>
{% endblock %}
